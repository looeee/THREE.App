{"version":3,"file":"main.js","sources":["../src/Engine/Core/Core.js","../src/Engine/Camera/OrbitingPerspectiveCamera.js","../src/Engine/Renderer/Renderer.js","../src/Engine/Debug/DebugOverlay.js","../src/Engine/utilities/handleResize.js","../src/Engine/PostRenderer/PostRenderer.js","../src/Engine/Engine.js","../src/AssetManager/ModelLoader.js","../src/AssetManager/AssetManager.js"],"sourcesContent":["import { Clock } from '/node_modules/three/build/three.module.js';\r\n\r\nconst clock = new Clock();\r\n\r\nclass Core {\r\n  constructor() {\r\n    this.objectsToUpdate = [];\r\n  }\r\n\r\n  update(updatables) {\r\n    const delta = clock.getDelta();\r\n    for (const object of updatables) {\r\n      if (typeof object.update === 'function') {\r\n        object.update(delta);\r\n      }\r\n    }\r\n  }\r\n\r\n  render(renderer, scene, camera) {\r\n    renderer.render(scene, camera);\r\n  }\r\n\r\n  start(renderer, scene, camera, updatables) {\r\n    renderer.setAnimationLoop(() => {\r\n      this.update(updatables);\r\n      this.render(renderer, scene, camera);\r\n    });\r\n  }\r\n\r\n  stop(renderer) {\r\n    renderer.setAnimationLoop(null);\r\n  }\r\n}\r\n\r\nexport { Core };\r\n","import {\r\n  PerspectiveCamera,\r\n  Vector3,\r\n  Object3D,\r\n} from '/node_modules/three/build/three.module.js';\r\nimport { OrbitControls } from '/node_modules/three/examples/jsm/controls/OrbitControls.js';\r\n\r\nclass OrbitingPerspectiveCamera extends PerspectiveCamera {\r\n  constructor(container) {\r\n    super(\r\n      35,\r\n      container.clientWidth / container.clientHeight,\r\n      0.1,\r\n      1000,\r\n    );\r\n\r\n    // this.position.set(-50, 100, 250);\r\n    this.position.set(-10, 20, 50);\r\n\r\n    this.setupControls(container);\r\n  }\r\n\r\n  setupControls(container) {\r\n    this.controls = new OrbitControls(this, container);\r\n\r\n    this.controls.enableDamping = true;\r\n  }\r\n\r\n  update(delta) {\r\n    this.controls.update(delta);\r\n  }\r\n\r\n  setTarget(target) {\r\n    if (target.isObject3D) {\r\n      this.controls.target.copy(target.position);\r\n    } else if (target.isVector3) {\r\n      this.controls.target.copy(target);\r\n    }\r\n  }\r\n}\r\n\r\nexport { OrbitingPerspectiveCamera };\r\n","import {\r\n  sRGBEncoding,\r\n  WebGLRenderer,\r\n} from '/node_modules/three/build/three.module.js';\r\n\r\nclass Renderer {\r\n  constructor(container) {\r\n    const renderer = new WebGLRenderer({\r\n      powerPreference: 'high-performance',\r\n      alpha: false,\r\n      antialias: true,\r\n      stencil: false,\r\n    });\r\n\r\n    renderer.setSize(container.clientWidth, container.clientHeight);\r\n    renderer.setPixelRatio(window.devicePixelRatio);\r\n\r\n    renderer.physicallyCorrectLights = true;\r\n\r\n    container.appendChild(renderer.domElement);\r\n\r\n    return renderer;\r\n  }\r\n}\r\n\r\nexport { Renderer };\r\n","class DebugOverlay {\r\n  constructor(spec) {\r\n    this.setupCameraDebugOverlay(spec);\r\n    this.setupEffectsDebugOverlay(spec);\r\n    this.setupLightsDebugOverlay(spec);\r\n    this.setupMaterialsDebugOverlay(spec);\r\n    this.setupRendererDebugOverlay(spec);\r\n  }\r\n\r\n  setupCameraDebugOverlay(spec) {\r\n    if (!spec.camera) return;\r\n  }\r\n\r\n  setupEffectsDebugOverlay(spec) {\r\n    if (!spec.effects) return;\r\n  }\r\n\r\n  setupLightsDebugOverlay(spec) {\r\n    if (!spec.lights) return;\r\n  }\r\n\r\n  setupMaterialsDebugOverlay(spec) {\r\n    if (!spec.materials) return;\r\n  }\r\n\r\n  setupRendererDebugOverlay(spec) {\r\n    if (!spec.renderer) return;\r\n  }\r\n}\r\n\r\nexport { DebugOverlay };\r\n","function onWindowResize(container, camera, renderer) {\r\n  camera.aspect = container.clientWidth / container.clientHeight;\r\n\r\n  camera.updateProjectionMatrix();\r\n\r\n  renderer.setSize(container.clientWidth, container.clientHeight);\r\n  renderer.setPixelRatio(window.devicePixelRatio);\r\n}\r\n\r\nfunction handleWindowResizeEvent(container, camera, renderer) {\r\n  window.addEventListener('resize', () => {\r\n    onWindowResize(container, camera, renderer);\r\n  });\r\n}\r\n\r\nexport { handleWindowResizeEvent };\r\n","import {\r\n  RGBFormat,\r\n  Vector2,\r\n  WebGLMultisampleRenderTarget,\r\n} from '/node_modules//three/build/three.module.js';\r\n\r\nimport { EffectComposer } from '/node_modules/three/examples/jsm/postprocessing/EffectComposer.js';\r\n\r\nimport { RenderPass } from '/node_modules/three/examples/jsm/postprocessing/RenderPass.js';\r\nimport { ShaderPass } from '/node_modules/three/examples/jsm/postprocessing/ShaderPass.js';\r\n\r\nimport { GammaCorrectionShader } from '/node_modules/three/examples/jsm/shaders/GammaCorrectionShader.js';\r\n\r\nimport { SMAAPass } from '/node_modules/three/examples/jsm/postprocessing/SMAAPass.js';\r\n\r\nclass PostRenderer {\r\n  constructor(renderer, scene, camera) {\r\n    this.renderer = renderer;\r\n    this.scene = scene;\r\n    this.camera = camera;\r\n\r\n    this.aaPass = null;\r\n    this.aaPassIndex = -1;\r\n    this.colorPassIndex = -1;\r\n\r\n    const size = this.renderer.getDrawingBufferSize(new Vector2());\r\n\r\n    this.createComposer(size);\r\n    this.createBasePass();\r\n    this.createColorPass();\r\n    this.createAAPass(size);\r\n\r\n    console.log(this);\r\n  }\r\n\r\n  createComposer(size) {\r\n    let renderTarget;\r\n    if (this.renderer.capabilities.isWebGL2) {\r\n      const parameters = {\r\n        format: RGBFormat,\r\n        stencilBuffer: false,\r\n      };\r\n\r\n      renderTarget = new WebGLMultisampleRenderTarget(\r\n        size.width,\r\n        size.height,\r\n        parameters,\r\n      );\r\n\r\n      renderTarget.samples = 8;\r\n    }\r\n\r\n    this.composer = new EffectComposer(this.renderer, renderTarget);\r\n  }\r\n\r\n  createBasePass() {\r\n    const basePass = new RenderPass(this.scene, this.camera);\r\n    basePass.name = 'Initial Render Pass';\r\n    this.composer.addPass(basePass);\r\n  }\r\n\r\n  createColorPass() {\r\n    this.colorPass = new ShaderPass(GammaCorrectionShader);\r\n    this.colorPass.name = 'Linear to sRGB Pass';\r\n    this.composer.addPass(this.colorPass);\r\n    this.colorPassIndex = this.composer.passes.indexOf(\r\n      this.colorPass,\r\n    );\r\n  }\r\n\r\n  createAAPass(size) {\r\n    if (this.renderer.capabilities.isWebGL2) return;\r\n    this.aaPass = new SMAAPass(size.x, size.y);\r\n    this.aaPass.name = 'SMAA Pass';\r\n    this.composer.addPass(this.colorPass);\r\n    this.aaPassIndex = this.composer.passes.indexOf(this.aaPass);\r\n  }\r\n\r\n  render() {\r\n    this.composer.render();\r\n  }\r\n\r\n  setSize(width, height) {\r\n    this.renderer.setSize(width, height);\r\n    this.composer.setSize(width, height);\r\n  }\r\n\r\n  setPixelRatio(pixelRatio) {\r\n    this.composer.setPixelRatio(pixelRatio);\r\n  }\r\n\r\n  // details =\r\n  // {\r\n  //   effect,\r\n  //   position: 'beforeColor' (default), 'afterColor', 'beforeAA', 'afterAA', index (int)\r\n  // }\r\n  addEffect(details) {\r\n    if (typeof details.position === 'number') {\r\n      this.insertPass(details.effect, details.position + 1);\r\n      return;\r\n    }\r\n    // TODO: test these\r\n    switch (details.position) {\r\n      case 'afterAA':\r\n        this.insertPass(\r\n          details.effect,\r\n          this.composer.passes.length - 1,\r\n        );\r\n        break;\r\n      case 'beforeAA':\r\n        this.insertPass(details.effect, this.aaPassIndex);\r\n        break;\r\n      case 'afterColor':\r\n        this.insertPass(details.effect, this.colorPassIndex + 1);\r\n        break;\r\n      case 'beforeColor':\r\n      default:\r\n        this.insertPass(details.effect, this.colorPassIndex);\r\n        break;\r\n    }\r\n\r\n    this.colorPassIndex = this.composer.passes.indexOf(\r\n      this.colorPass,\r\n    );\r\n    this.colorPassIndex = this.composer.passes.indexOf(\r\n      this.colorPass,\r\n    );\r\n  }\r\n\r\n  insertPass(pass, index) {\r\n    if (this.composer.passes.length < index) {\r\n      console.error('Cannot place Effect at that position');\r\n    } else {\r\n      this.composer.insertPass(pass, index);\r\n    }\r\n  }\r\n\r\n  setAnimationLoop(callback) {\r\n    this.renderer.setAnimationLoop(callback);\r\n  }\r\n}\r\n\r\nexport { PostRenderer };\r\n","import { Core } from './Core/Core.js';\r\nimport { OrbitingPerspectiveCamera } from './Camera/OrbitingPerspectiveCamera.js';\r\nimport { Renderer } from './Renderer/Renderer.js';\r\n// import { ColorManager } from './Color/ColorManager.js';\r\nimport { DebugOverlay } from './Debug/DebugOverlay.js';\r\n// import { PostEffects } from './Effects/PostEffects.js';\r\nimport { handleWindowResizeEvent } from './utilities/handleResize.js';\r\n\r\nimport { Scene } from '/node_modules/three/build/three.module.js';\r\nimport { PostRenderer } from './PostRenderer/PostRenderer.js';\r\n\r\nlet usingPostRenderer = false;\r\n\r\nclass Engine {\r\n  constructor(container, debug = false) {\r\n    this.camera = new OrbitingPerspectiveCamera(container);\r\n    this.renderer = new Renderer(container);\r\n    this.scene = new Scene();\r\n\r\n    this.core = new Core(container);\r\n\r\n    // this array contains objects with an update\r\n    // method that will run once per frame\r\n    this.updatables = [this.camera];\r\n\r\n    handleWindowResizeEvent(container, this.camera, this.renderer);\r\n\r\n    if (debug) this.setupDebugOverlay();\r\n  }\r\n\r\n  addRenderableObject(object, updatable = false) {\r\n    this.scene.add(object);\r\n\r\n    if (updatable) {\r\n      this.updatables.push(object);\r\n    }\r\n  }\r\n\r\n  // Automatically switch to post renderer when effects are added\r\n  // To force this to happen early,\r\n  // e.g. to prevent shader recompilation when adding passes later,\r\n  // pass an empty array to this function\r\n  addEffects(effects) {\r\n    if (usingPostRenderer === false) {\r\n      this.renderer = new PostRenderer(\r\n        this.renderer,\r\n        this.scene,\r\n        this.camera,\r\n      );\r\n\r\n      usingPostRenderer = true;\r\n    }\r\n\r\n    for (const effect of effects) {\r\n      this.renderer.addEffect(effect);\r\n    }\r\n  }\r\n\r\n  start() {\r\n    this.core.start(\r\n      this.renderer,\r\n      this.scene,\r\n      this.camera,\r\n      this.updatables,\r\n    );\r\n  }\r\n\r\n  stop() {\r\n    this.core.stop(this.renderer);\r\n  }\r\n\r\n  setupDebugOverlay() {\r\n    const overlay = new DebugOverlay({\r\n      camera: null,\r\n      effects: null,\r\n      lights: null,\r\n      materials: null,\r\n      renderer: null,\r\n    });\r\n  }\r\n}\r\n\r\nexport { Engine };\r\n","import { GLTFLoader } from '/node_modules/three/examples/jsm/loaders/GLTFLoader.js';\r\n\r\nclass ModelLoader {\r\n  constructor() {\r\n    this.loader = new GLTFLoader();\r\n  }\r\n\r\n  load(url) {\r\n    return new Promise((resolve, reject) => {\r\n      this.loader.load(\r\n        url,\r\n        gltfData => resolve(gltfData),\r\n        null,\r\n        reject,\r\n      );\r\n    });\r\n  }\r\n\r\n  startLoadingModels(manifest) {\r\n    // create copy of the manifest which maps names to URLS\r\n    // once the models have loaded we'll switch the URLS\r\n    // for the loaded data\r\n    this.models = { ...manifest.models };\r\n\r\n    const urls = Object.values(manifest.models);\r\n    this.promises = urls.map(url =>\r\n      this.load(url).catch(errorData => {\r\n        return {\r\n          status: 'failed',\r\n          errorData,\r\n        };\r\n      }),\r\n    );\r\n  }\r\n\r\n  async finishLoadingModel() {\r\n    const modelData = await Promise.all(this.promises);\r\n\r\n    for (const [index, name] of Object.keys(this.models).entries()) {\r\n      this.models[name] = modelData[index];\r\n    }\r\n\r\n    return this.models;\r\n  }\r\n}\r\n\r\nexport { ModelLoader };\r\n","import { ModelLoader } from './ModelLoader.js';\r\n\r\nclass AssetManager {\r\n  constructor() {\r\n    this.assets = {\r\n      models: {},\r\n      textures: {},\r\n    };\r\n  }\r\n\r\n  async loadManifest() {\r\n    return (await fetch('/config/assets.manifest.json')).json();\r\n  }\r\n\r\n  async loadAssets() {\r\n    this.manifest = await this.loadManifest();\r\n\r\n    this.loadModels();\r\n    this.loadTextures();\r\n\r\n    await this.finishLoading();\r\n\r\n    return this.assets;\r\n  }\r\n\r\n  loadModels() {\r\n    if (!this.manifest.models) return;\r\n\r\n    this.modelLoader = new ModelLoader();\r\n\r\n    this.modelLoader.startLoadingModels(this.manifest);\r\n  }\r\n\r\n  loadTextures() {\r\n    // if (!this.manifest.textures) return;\r\n    // TODO\r\n  }\r\n\r\n  async finishLoading() {\r\n    this.assets.models = await this.modelLoader.finishLoadingModel();\r\n  }\r\n}\r\n\r\nexport { AssetManager };\r\n"],"names":["Clock","PerspectiveCamera","OrbitControls","WebGLRenderer","Vector2","RGBFormat","WebGLMultisampleRenderTarget","EffectComposer","RenderPass","ShaderPass","GammaCorrectionShader","SMAAPass","Scene","GLTFLoader"],"mappings":"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"}